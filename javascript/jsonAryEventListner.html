<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>javascript/jsonAryEventListener.html</title>
</head>

<body>
    <p id="cal">hi</p>
    <script>
        var jsonData = [{ "id": 1, "first_name": "Daisey", "last_name": "Ragsdale", "email": "dragsdale0@loc.gov", "gender": "Female" },
        { "id": 2, "first_name": "Teressa", "last_name": "Mathy", "email": "tmathy1@elegantthemes.com", "gender": "Female" },
        { "id": 3, "first_name": "Courtnay", "last_name": "Thurber", "email": "cthurber2@feedburner.com", "gender": "Male" },
        { "id": 4, "first_name": "Kit", "last_name": "Jeannaud", "email": "kjeannaud3@bizjournals.com", "gender": "Female" },
        { "id": 5, "first_name": "Kalindi", "last_name": "Lowth", "email": "klowth4@epa.gov", "gender": "Female" },
        { "id": 6, "first_name": "Emmanuel", "last_name": "Speeding", "email": "espeeding5@twitter.com", "gender": "Male" },
        { "id": 7, "first_name": "Doy", "last_name": "Lukacs", "email": "dlukacs6@eepurl.com", "gender": "Male" },
        { "id": 8, "first_name": "Germain", "last_name": "Nutley", "email": "gnutley7@myspace.com", "gender": "Male" },
        { "id": 9, "first_name": "Vannie", "last_name": "Summerside", "email": "vsummerside8@cmu.edu", "gender": "Female" },
        { "id": 10, "first_name": "Gar", "last_name": "Balchin", "email": "gbalchin9@shareasale.com", "gender": "Male" },
        { "id": 11, "first_name": "Darrick", "last_name": "Whitsey", "email": "dwhitseya@hhs.gov", "gender": "Male" },
        { "id": 12, "first_name": "Augustus", "last_name": "Audley", "email": "aaudleyb@apache.org", "gender": "Male" },
        { "id": 13, "first_name": "Alfredo", "last_name": "Brinded", "email": "abrindedc@tmall.com", "gender": "Male" },
        { "id": 14, "first_name": "Fin", "last_name": "Henker", "email": "fhenkerd@hostgator.com", "gender": "Male" },
        { "id": 15, "first_name": "Gertrud", "last_name": "Rozzell", "email": "grozzelle@huffingtonpost.com", "gender": "Female" }];

        var titles = ["id", "first_name", "last_name", "email", "gender", "button"];
        //tr태그를 만들 때 id속성으로 id값을 넣어주고 버튼을 누르면 tr이 사라지게 하는데, 기준을 id값을 기준으로 함.
        var show = document.getElementById("cal");

        var $table = document.createElement("table");
        $table.setAttribute("border", "1");
        $table.setAttribute("id", "table");
        var $tr = document.createElement("tr");
        for (title of titles) {
            var $th = document.createElement("th");
            var $text = document.createTextNode(title);
            $th.appendChild($text);
            $tr.appendChild($th);
        }
        $table.appendChild($tr);

        for (row of jsonData) {
            $tr = document.createElement("tr");
            console.log(row.id);
            $tr.setAttribute('id', row.id);
            for (attr in row) {
                $td = document.createElement("td");
                $text = document.createTextNode(row[attr]);
                $td.appendChild($text);
                $tr.appendChild($td);

            }
            var $td = document.createElement("td");
            var $button = document.createElement("button");
            $button.innerHTML = "Click";
            $button.setAttribute('btnid', row.id);
            console.log($button.id);
           
            // $button.onclick = function () {//button id와 같은걸 지움.
            //     document.getElementById(this.id).remove();
            // }
            
            $button.onclick = function () { //parentNode 이용해서 tr 삭제
                // this.parentNode.parentNode.remove();
                this.getElementById(document.getAttrivute("btnid")).remove(); //하 싯팔
                // document.getElementById(this.id - 1).remove(); 쓰레기다
                
               
            }
            
            
            //tag의 index번호..
            // $button.addEventListener("mouseup", removeTr);
            //  $button.addEventListener("click", removeTrr);
            $td.appendChild($button);
            $tr.appendChild($td);
            // $button.onmouseup
            $table.appendChild($tr);
            // }
            show.appendChild($table);
            // function removeTrr() {
            //     this.parentNode.parentNode.style.background = "red";
            // }
// function removeTr(){
//     { //parentNode 이용해서 tr 삭제
//         this.parentNode.innerHTML="kak";
//     }

// //     // button의 id와 같은 tr을 찾아서 삭제한다.
// //     document.getElementById("table").childNodes[].remove();
}
//이거 응용해서 해 볼것.
// document.getElementById(id).remove();
// var $tr = document.createElement('tr');
// $tr.setAttribute('id',jsonData.id);
// $button = document.createElement('button');
// $button.setAttribute('id',jsonDate);
// $tr.remove();
    </script>
</body>

</html>